# Gherkin tests (generated by ollama based on unit tests) for the cart service
# Just some scenarios to get you started, not the full set of tests
Feature: Cart Service
  As a user
  I want to interact with the cart service
  So that I can manage my cart

Scenario: Get or create cart for new user (Risk: None)
  Given no existing cart for user "user-123"
  When calling `cartService.getOrCreateCart("user-123")`
  Then a new cart is created and returned
  And the cart has a defined ID, user ID, and timestamps

Scenario: Get or create cart for returning user (Risk: None)
  Given an existing cart for user "user-123"
  When calling `cartService.getOrCreateCart("user-123")`
  Then the same cart is returned
  And the cart's ID and user ID match the original cart

Scenario: Add valid product to cart (Risk: None)
  Given a valid product "product1" with price 10.99
  When calling `cartService.addToCart("user-123", "product1.id", 1)`
  Then the product is added to the cart
  And the cart has one item with quantity 1 and total amount 10.99

Scenario: Add multiple quantities of a product (Risk: None)
  Given a valid product "product1" with price 10.99
  When calling `cartService.addToCart("user-123", "product1.id", 3)`
  Then the product is added to the cart with quantity 3
  And the cart has one item with total amount 32.97

Scenario: Increment quantity if product already exists in cart (Risk: None)
  Given a valid product "product1" with price 10.99 and existing in cart
  When calling `cartService.addToCart("user-123", "product1.id", 3)`
  Then the product's quantity is incremented to 5
  And the cart has one item with total amount 54.95

Scenario: Throw error if product not found (Risk: Error)
  Given a non-existent product "non-existent-id"
  When calling `cartService.addToCart("user-123", "non-existent-id", 1)`
  Then an error is thrown saying "Product not found"

Scenario: Update cart item quantity (Risk: None)
  Given a valid product "product1" with price 10.99 and existing in cart
  When calling `cartService.updateCartItem("user-123", "product1.id", 5)`
  Then the product's quantity is updated to 5
  And the cart has one item with total amount 54.95

Scenario: Remove item from cart (Risk: None)
  Given a valid product "product1" with price 10.99 and existing in cart
  When calling `cartService.removeFromCart("user-123", "product1.id")`
  Then the product is removed from the cart
  And the cart has no items

Scenario: Clear all items from cart (Risk: None)
  Given a valid cart with multiple items
  When calling `cartService.clearCart("user-123")`
  Then all items are removed from the cart
  And the cart has no items